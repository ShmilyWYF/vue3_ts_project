import"./vue.8f0363a6.js";import{e as Y,s as K,_ as S,b as V}from"./index.vite.f0e544cd.js";import"./mavon-Editor.a6b8cb83.js";/* empty css                     *//* empty css                                                              *//* empty css                                                              *//* empty css                                                              *//* empty css                                                              *//* empty css                                                              */import{G as U,d as C,ag as i,o as L,c as W,U as e,a as w,O as t,S as m,ac as R,Z as h,h as $,M as G,u as H}from"./@vue.164e6201.js";/* empty css                                                              *//* empty css                                                              *//* empty css                                                              *//* empty css                                                              */import{a as E}from"./element-plus.496f9954.js";import"./call-bind.10384396.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./vue-router.868db7b0.js";import"./axios.f2a602b3.js";import"./qs.b7100b69.js";import"./side-channel.e4d943d6.js";import"./object-inspect.c9d9bc85.js";import"./js-cookie.711e9524.js";import"./vuex.61a64a92.js";import"./vuex-persistedstate.fa252374.js";import"./nprogress.0db61dbe.js";import"./@element-plus.61ae371c.js";import"./vue-i18n.7f600a88.js";import"./@intlify.3326f550.js";import"./mockjs.feb59d68.js";import"./lodash-es.759d0354.js";import"./@vueuse.a50a866a.js";import"./@popperjs.36402333.js";import"./@ctrl.b082b0c1.js";import"./dayjs.09808879.js";import"./async-validator.267d9719.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.c4116648.js";const P={class:"el-tree"},Z={class:"buttons"},J=U({__name:"index",setup(T){const d=C([]),c=C(),y={children:"children",label:"title"},A=g=>{const b=[];let s=0;return g.forEach(n=>{var _;s++;const F={path:n.path,title:(_=n.meta)==null?void 0:_.title,id:s,children:[]};if(n.children){let o=0;n.children.forEach(u=>{o++,F.children.push({title:u.meta.title,path:u.path,id:parseInt(s+""+o)})})}b.push(F)}),b};d.value=A(Y),console.log("\u6784\u5EFAtree\u6811\uFF1A",d);const l=()=>{const g=c.value.getHalfCheckedNodes().map(b=>{let s=[];Object.assign(s,b);let n=R(s.children).map(_=>_.id),F=[];return c.value.getCheckedNodes(!1,!1).forEach(_=>{let o=R(_);n.includes(o.id)&&F.push(o)}),s.children=F,s});K.commit("routerStore/SET_MENU_TREE",g),console.log(g,"get\u8282\u70B9\u5BF9\u8C61\u7EC4")},p=()=>{c.value.setCheckedKeys([13,14,15],!1)},x=()=>{c.value.setCheckedKeys([],!1)};return(g,b)=>{const s=i("el-tree"),n=i("el-button");return L(),W("div",P,[e(s,{ref_key:"treeRef",ref:c,data:d.value,"default-checked-keys":[13],"default-expanded-keys":[1],props:y,"node-key":"id","show-checkbox":""},null,8,["data"]),w("div",Z,[e(n,{onClick:l},{default:t(()=>[m("\u8BBE\u7F6E\u5BFC\u822A")]),_:1}),e(n,{onClick:p},{default:t(()=>[m("set by key")]),_:1}),e(n,{onClick:x},{default:t(()=>[m("reset")]),_:1})])])}}}),Q=S(J,[["__file","E:/vue3_ts_project/src/views/Dashboard/components/shiro/index.vue"]]),X={for:"upload",class:"ui-upload"},ee={for:"upload",class:"ui-upload"},te=U({__name:"index",setup(T){const d=C("info"),c=C(),y=C(),A=h({}),l=h({}),p=h({}),x=h({webSiteLog:{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"change"},webSiteName:{required:!0,message:"\u8BF7\u8BBE\u7F6E\u7F51\u7AD9\u540D\u79F0",trigger:"blur"},englishName:{required:!0,message:"\u8BF7\u8BBE\u7F6E\u7F51\u7AD9\u82F1\u6587\u540D\u79F0",trigger:"blur"},multiLanguage:{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5F00\u542F\u591A\u8BED\u8A00",trigger:"blur"},commentReview:{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5F00\u542F\u8BC4\u8BBA\u5BA1\u6838",trigger:"blur"},websiteCreateTime:{required:!0,message:"\u8BF7\u9009\u62E9\u7F51\u7AD9\u521B\u5EFA\u65F6\u95F4",trigger:"blur"},notice:{required:!0,message:"\u7F51\u7AD9\u516C\u544A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},beianNumber:{required:!0,message:"\u5907\u6848\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},qqLogin:{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528qq\u767B\u9646",trigger:"blur"}}),g=h({avatar:{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247",trigger:"change"},isEmailNotice:{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5F00\u542F\u7535\u5B50\u90AE\u4EF6\u901A\u77E5",trigger:"blur"}});$(async()=>{await b(),s({paneName:d.value})});const b=async()=>{await V.useAppApi.getUseAppConfig().then(o=>{const{data:u}=o.data;Object.assign(A,u)})},s=o=>{if(o)switch(o.paneName){case"info":Object.assign(l,A.websiteConfig);break;case"user":Object.assign(p,A.userConfig);break}else d.value="info"},n=o=>{let u=new FormData;u.append("file",o.target.files[0]),V.imgApi.uploadImg(u).then(B=>{const{data:r}=B.data;d.value=="info"&&(l.webSiteLog=r),d.value=="user"&&(p.avatar=r)},B=>{E.error(B.toString())})},F=()=>{c.value.validate(o=>{o?V.useAppApi.updateWebSiteConfig(l).then(({data:{message:u}})=>{E.success(u)},u=>{E.error(u.message)}):E({title:"\u901A\u77E5",message:"\u8BF7\u68C0\u67E5\u8868\u5355\u540E\u518D\u8BD5",type:"warning"})})},_=()=>{y.value.validate(o=>{o?V.useAppApi.updateUserConfig(p).then(({data:{message:u}})=>{E.success(u)},u=>{E.error(u.message)}):E({title:"\u901A\u77E5",message:"\u8BF7\u68C0\u67E5\u8868\u5355\u540E\u518D\u8BD5",type:"warning"})})};return(o,u)=>{const B=i("el-image"),r=i("el-form-item"),D=i("el-input"),f=i("el-radio"),v=i("el-radio-group"),j=i("el-date-picker"),N=i("el-button"),q=i("el-form"),k=i("el-tab-pane"),M=i("el-col"),z=i("el-row"),I=i("el-tabs"),O=i("el-card");return L(),G(O,{class:"website-box"},{default:t(()=>[e(I,{modelValue:d.value,"onUpdate:modelValue":u[9]||(u[9]=a=>d.value=a),onTabClick:s},{default:t(()=>[e(k,{label:"\u7F51\u7AD9\u8BBE\u7F6E",name:"info"},{default:t(()=>[e(q,{model:l,"label-position":"left","label-width":"100px",ref_key:"websiteRef",ref:c,rules:x},{default:t(()=>[e(r,{label:"\u7F51\u7AD9logo",prop:"webSiteLog"},{default:t(()=>[w("label",X,[e(B,{style:{width:"100px",height:"100px"},src:l.webSiteLog,fit:"fill"},null,8,["src"])]),w("input",{id:"upload",type:"file",name:"file",multiple:"multiple",onChange:n,style:{display:"none"}},null,32)]),_:1}),e(r,{label:"\u7F51\u7AD9\u540D\u79F0",prop:"webSiteName"},{default:t(()=>[e(D,{modelValue:l.webSiteName,"onUpdate:modelValue":u[0]||(u[0]=a=>l.webSiteName=a),size:"small",style:{width:"400px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"\u7F51\u7AD9\u82F1\u6587\u540D\u79F0",prop:"englishName"},{default:t(()=>[e(D,{modelValue:l.englishName,"onUpdate:modelValue":u[1]||(u[1]=a=>l.englishName=a),size:"small",style:{width:"400px"}},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8BC4\u8BBA\u9700\u8981\u5BA1\u6838",prop:"commentReview"},{default:t(()=>[e(v,{modelValue:l.commentReview,"onUpdate:modelValue":u[2]||(u[2]=a=>l.commentReview=a)},{default:t(()=>[e(f,{label:0},{default:t(()=>[m("\u5173\u95ED")]),_:1}),e(f,{label:1},{default:t(()=>[m("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"\u591A\u8BED\u8A00",prop:"multiLanguage"},{default:t(()=>[e(v,{modelValue:l.multiLanguage,"onUpdate:modelValue":u[3]||(u[3]=a=>l.multiLanguage=a)},{default:t(()=>[e(f,{label:0},{default:t(()=>[m("\u5173\u95ED")]),_:1}),e(f,{label:1},{default:t(()=>[m("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"\u7F51\u7AD9\u521B\u5EFA\u65E5\u671F",prop:"websiteCreateTime"},{default:t(()=>[e(j,{modelValue:l.websiteCreateTime,"onUpdate:modelValue":u[4]||(u[4]=a=>l.websiteCreateTime=a),placeholder:"\u9009\u62E9\u65E5\u671F",style:{width:"400px"},type:"date","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u7F51\u7AD9\u516C\u544A",prop:"notice"},{default:t(()=>[e(D,{modelValue:l.notice,"onUpdate:modelValue":u[5]||(u[5]=a=>l.notice=a),rows:5,placeholder:"\u8BF7\u8F93\u5165\u516C\u544A\u5185\u5BB9",style:{width:"400px"},type:"textarea"},null,8,["modelValue"])]),_:1}),e(r,{label:"qq\u767B\u5F55",prop:"qqLogin"},{default:t(()=>[e(v,{modelValue:l.qqLogin,"onUpdate:modelValue":u[6]||(u[6]=a=>l.qqLogin=a)},{default:t(()=>[e(f,{label:0},{default:t(()=>[m("\u5173\u95ED")]),_:1}),e(f,{label:1},{default:t(()=>[m("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"\u5907\u6848\u53F7",prop:"beianNumber"},{default:t(()=>[e(D,{modelValue:l.beianNumber,"onUpdate:modelValue":u[7]||(u[7]=a=>l.beianNumber=a),size:"small",style:{width:"400px"}},null,8,["modelValue"])]),_:1}),e(N,{size:"small",style:{"margin-left":"6.3rem"},type:"primary",onClick:F},{default:t(()=>[m(" \u4FDD\u5B58 ")]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(k,{label:"\u7528\u6237\u8BBE\u7F6E",name:"user"},{default:t(()=>[e(q,{model:p,"label-position":"left","label-width":"120px",ref_key:"userRef",ref:y,rules:g},{default:t(()=>[e(z,{style:{width:"600px"}},{default:t(()=>[e(M,{md:12},{default:t(()=>[e(r,{label:"\u6E38\u5BA2\u5934\u50CF",prop:"avatar"},{default:t(()=>[w("label",ee,[e(B,{style:{width:"100px",height:"100px"},src:p.avatar,fit:"fill"},null,8,["src"])]),w("input",{id:"upload",type:"file",name:"file",multiple:"multiple",onChange:n,style:{display:"none"}},null,32)]),_:1})]),_:1})]),_:1}),e(r,{label:"\u90AE\u7BB1\u901A\u77E5",prop:"isEmailNotice"},{default:t(()=>[e(v,{modelValue:p.isEmailNotice,"onUpdate:modelValue":u[8]||(u[8]=a=>p.isEmailNotice=a)},{default:t(()=>[e(f,{label:0},{default:t(()=>[m("\u5173\u95ED")]),_:1}),e(f,{label:1},{default:t(()=>[m("\u5F00\u542F")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(N,{size:"small",style:{"margin-left":"6.3rem"},type:"primary",onClick:_},{default:t(()=>[m(" \u4FDD\u5B58 ")]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(k,{label:"\u6743\u9650\u7BA1\u7406",name:"routers"},{default:t(()=>[e(H(Q))]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});const $e=S(te,[["__scopeId","data-v-b596949c"],["__file","E:/vue3_ts_project/src/views/Dashboard/components/website/index.vue"]]);export{$e as default};
